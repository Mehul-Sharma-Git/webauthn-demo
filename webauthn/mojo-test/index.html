<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="./mojoauth.min.js"></script>
    <link rel="stylesheet" href="./index.css"/>
    <!-- <script src="
    https://dev-cdn.mojoauth.com/js/mojoauth.min.js"
		>
    </script> -->
    <!-- <script src="
    https://cdn.mojoauth.com/js/mojoauth.min.js"
		>
    </script> -->
</head>

<body >
    <div class="container">
        <h2>MojoAuth Login Form</h2>
        <div class="email-container">
            <input class="input-email" type="email" placeholder="Email"/>
        </div>
        
        <div class="password-container">
            <mojoauth-passwordless-widget position="left" width="48px" height="48px" ></mojoauth-passwordless-widget>
            <input class="input-password-left" type="'password" placeholder="password"/>
            <!-- <input class="input-password-right" type="'password" placeholder="password"/>
            <mojoauth-passwordless-widget position="right" width="48px" height="48px" ></mojoauth-passwordless-widget> -->
        </div>
        <div class="button-container">
        <button class="input-button" >Register/Sign In</button>
        </div>
    <div class="footer">
        <h6 >Powered by MojoAuth</h6>
    </div>
</div>
    <!-- <div id="mojoauth-passwordless-form"></div> -->
   
    <div id="user-profile"></div>
    <script>
        let test='Email OTP'
        let source;
         switch(test){
    case 'Magic Link' : source= [ {type:'email',feature:'magiclink'}]
                            break;
    case 'Email OTP' : source= [ {type:'email',feature:'otp'}]
                            break;
    case 'Phone OTP' : source= [ {type:'phone',feature:'otp'}]
                            break;
    case 'Magic Link and Phone OTP' : source= [ {type:'email',feature:'magiclink'}, {type:'phone',feature:'otp'}]
                            break;
    case 'Email OTP and Phone OTP'  : source= [ {type:'email',feature:'otp'}, {type:'phone',feature:'otp'}]
                            break;
}
        // Enter you API Key
        config={
            language: "en", 
            redirect_url: "https://rad-elf-bae47c.netlify.app/profile",
            source: source= [ {type:'email',feature:'otp'}],

        }

//         function registerWebAuthnStart(accessToken) {
//    mojoauth.enableWebauthn(accessToken).then(response => {
//        console.log(response);
//        console.log(redirectUrl);
//    })
//    .catch(e => {
//        console.log(e);
//    });
// }


        const mojoauth = new MojoAuth( "cd62e8c0-9c40-4096-9c08-4d948ef44e69", config);
        // Use signInWithEmailOTP() for authentication using Email OTP
        mojoauth.signInWithWidget().then( response => {
            console.log("reached here")
            localStorage.setItem("userTokentest2", response.oauth.access_token)
            localStorage.setItem("userEmailtest2", response.user.identifier)
            //          mojoauth.enableWebauthn(response.oauth.access_token)
            
            console.log( response )
        } );
    
        // mojoauth.enableWebauthn().then(response=>console.log(response))
    </script>
<!-- <script type="text/javascript">app_id="62c69be5fda2380020ca0217";distribution_key="dist_2";</script><script type="text/javascript" src="https://loader.knack.com/62c69be5fda2380020ca0217/dist_2/knack.js"></script><div id="knack-dist_2">Loading...</div></body> -->

</html>